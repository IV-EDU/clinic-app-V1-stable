# Changelog – Clinic-App-Local

> Running log of all changes made by AI agents. Append one line per task.
> Format: `YYYY-MM-DD | What changed | Files touched`
>
> **Every AI agent MUST append to this file after completing a task.**

---

2025-02-13 | Created comprehensive AGENTS.md (full architecture reference), UI_REDESIGN_PLAN.md (15-phase plan), docs/CHANGELOG.md, updated copilot-instructions.md and LAST_PLAN.md | AGENTS.md, UI_REDESIGN_PLAN.md, docs/CHANGELOG.md, .github/copilot-instructions.md, LAST_PLAN.md
2025-02-13 | Cleaned up ~246 MB of unnecessary files: build/, dist/, .venv-wsl/, .venv3/, __pycache__/, .pytest_cache/, clinic.sqlite, ClinicApp-Source.zip, restore_project.py, docs/old/, docs/legacy-data/, old doc HTML files. Updated .cursorrules and docs/INDEX.md to match. | .cursorrules, docs/INDEX.md, docs/CHANGELOG.md
2026-02-13 | Phase 1 COMPLETE: CSS design system + dark mode foundation. Added design-system.css with complete token system (colors, typography, spacing, shadows for light/dark), theme toggle button with localStorage persistence, migrated app.css hard-coded colors to CSS variables. | static/css/design-system.css (new), templates/_base.html, static/css/app.css, docs/INDEX.md, docs/CHANGELOG.md, UI_REDESIGN_PLAN.md, README.md
2026-02-13 | DARK MODE FIX: Added 200+ comprehensive component-specific overrides to fix invisible text, improve contrast, and ensure all UI elements render properly in dark mode. Brightened dark mode color palette (success, warning, danger, info) for better readability. | static/css/design-system.css, docs/CHANGELOG.md
2026-02-13 | DARK MODE FIX (round 2): Rewrote dark mode overrides (800+ lines, sections A-S) covering all pages. Added dark overrides to theme-system.css for utility classes. Fixed button hover brightness. | static/css/design-system.css, static/css/theme-system.css, docs/CHANGELOG.md
2026-02-13 | DARK MODE FIX (round 3): Added sections T-V for treatment cards (40+ inline-style overrides from _list.html), treatments-header-section, stat-badges, admin-settings-header gradient, doctor-filter, date inputs, loading-overlay, message-content. Verified all pages with Playwright screenshots. | static/css/design-system.css, docs/CHANGELOG.md
2026-02-13 | Phase 2 COMPLETE: Modal System + Toast Notifications + Loading States. Created reusable modal-system.js (Modal class with open/close/events), toast.js (Toast.success/error/warning/info with auto-dismiss), components.css (modal/toast/skeleton/button-spinner styles), updated _base.html. All components fully dark-mode compatible. | static/js/modal-system.js (new), static/js/toast.js (new), static/css/components.css (new), templates/_base.html, docs/CHANGELOG.md, UI_REDESIGN_PLAN.md, docs/INDEX.md
2026-02-14 | AGENTS.md Section 23 added: Bug Checking & Verification mandate (browser tool + Playwright). Phase 3 COMPLETE: Arabic search normalization applied to patients/routes.py, new /api/global-search endpoint in core.py, AJAX-powered search dropdown in _nav.html with keyboard navigation, dropdown CSS in app.css, i18n translations (no_results_found, searching). | AGENTS.md, clinic_app/blueprints/patients/routes.py, clinic_app/blueprints/core/core.py, templates/_nav.html, static/css/app.css, clinic_app/services/i18n.py, UI_REDESIGN_PLAN.md, docs/CHANGELOG.md
2026-02-15 | Created VISION.md (product vision, agent role, roadmap, decision triggers, priority stack, Jarvis self-maintenance rules). Added Section 0 pointer in AGENTS.md. Rewrote Section 23 (verification) with Playwright limitations, port requirements, print testing rules. Updated copilot-instructions.md with VISION.md reference. | VISION.md (new), AGENTS.md, .github/copilot-instructions.md, docs/INDEX.md, docs/CHANGELOG.md
2026-02-15 | Fixed print/dark-mode bugs: (1) Replaced brute-force @media print wildcard in design-system.css with proper CSS variable resets to light values, (2) Added theme-toggle-btn to print hide list in print-receipts.css, (3) Fixed theme --ink/--text-primary override in ui.py to not conflict with dark mode (dark-mode resets appended), (4) Set data-theme="light" on treatment_summary_print.html to prevent dark mode leaking into print-only page. | static/css/design-system.css, static/css/print-receipts.css, clinic_app/services/ui.py, templates/payments/treatment_summary_print.html, docs/CHANGELOG.md
2026-02-15 | Full dark mode sweep: (1) Appointments page — 200+ lines of [data-theme="dark"] overrides for date headers, cards, status buttons, modals, patient suggestions, (2) Admin settings — dark mode for header gradient, tabs, modals, cards, (3) Diagnosis/Medical/Images – added design-system.css import, data-theme sync from localStorage, 180+ lines of dark mode overrides in diag_plus/style.css, images-specific dark mode in images.html inline styles. | templates/appointments/vanilla.html, templates/admin/settings/index.html, static/diag_plus/style.css, templates/diag_plus/diagnosis.html, templates/diag_plus/medical.html, templates/diag_plus/images.html, docs/CHANGELOG.md
2026-02-15 | Dark mode color chain fix: Made --color-accent in dark mode respect user's --primary-color (was hardcoded blue #60a5fa), removed circular --primary-color bridge override, fixed --metric-color. Added dark mode text reset to admin settings template. Fixed test_reports_pagination regex (31→30 false match from _nav.html JS template). Added .playwright-mcp/ and data/agent-screenshots/ to .gitignore. Added screenshot folder rules to AGENTS.md. | static/css/design-system.css, templates/admin/settings/index.html, tests/test_reports_pagination.py, .gitignore, AGENTS.md, docs/CHANGELOG.md
2026-02-15 | 8-item dark mode & UX fix batch: (1) Diagnosis quick-pick buttons keep status colors in dark mode (split .qbtn dark rule), (2) Added dark/light toggle button to diagnosis/medical/images standalone pages, (3) Start-Clinic.bat auto-kills existing process on port 8080, (4) Audit log View modal technical details pre block now uses .audit-pre class with dark mode override, (5) All modals improved contrast in dark mode (border + shadow + darker overlay) across design-system.css/admin/appointments, (6) Playwright testing cookbook added to AGENTS.md (routes, login, dark mode toggle, common mistakes). | static/diag_plus/style.css, templates/diag_plus/diagnosis.html, templates/diag_plus/medical.html, templates/diag_plus/images.html, templates/admin/settings/index.html, templates/appointments/vanilla.html, static/css/design-system.css, Start-Clinic.bat, AGENTS.md, docs/CHANGELOG.md
2026-02-15 | Nav header + diagnosis teeth fixes: (1) Light mode --color-accent now uses var(--primary-color) so nav header follows golden theme instead of hardcoded blue, (2) Diagnosis teeth in dark mode now show WHITE background (empty teeth) for contrast, (3) Status-colored teeth (Caries=red, Healthy=green, Crown=orange, etc.) now properly display their colors in dark mode with explicit background overrides. | static/css/design-system.css, static/diag_plus/style.css, docs/CHANGELOG.md
