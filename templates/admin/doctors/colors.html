{% extends '_base.html' %}
{% block content %}
<div class="card">
  <div class="card-header">
    <h1 style="margin:0">Doctor Colors</h1>
    <p class="muted" style="margin:8px 0 0">
      Customize the highlight color that appears on the appointments board for each doctor.
    </p>
  </div>
  <form method="post" action="{{ url_for('admin_doctors.reset_colors') }}" style="margin-top:12px">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
    <button class="btn danger">Reset All To Defaults</button>
  </form>
</div>

<div class="card">
  <div class="doctor-grid">
    {% for doctor in doctors %}
    <form class="doctor-item" method="post" action="{{ url_for('admin_doctors.doctor_colors') }}">
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
      <input type="hidden" name="doctor_id" value="{{ doctor.doctor_id }}">
      <input type="hidden" name="action" value="update_color">
      <div class="doctor-meta">
        <div class="doctor-name">{{ doctor.doctor_label }}</div>
        <div class="doctor-id">{{ doctor.doctor_id }}</div>
      </div>
      <div class="color-controls">
        <div class="color-preview" style="background: {{ doctor.color }}"></div>
        <label>
          <span>Color</span>
          <input type="color" name="color" value="{{ doctor.color }}" class="color-input" onchange="this.form.querySelector('.color-preview').style.background = this.value">
        </label>
      </div>
      <div class="color-actions">
        <button class="btn">Save</button>
        <button class="btn secondary" type="submit" name="action" value="delete_color">Use Default</button>
      </div>
    </form>
    {% endfor %}
  </div>
</div>

<style>
.doctor-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 16px;
}

.doctor-item {
  border: 1px solid #e5e7eb;
  border-radius: 16px;
  padding: 16px;
  background: #f9fafb;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.doctor-meta {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.doctor-name {
  font-weight: 600;
  color: #1f2937;
}

.doctor-id {
  font-size: 12px;
  color: #6b7280;
}

.color-controls {
  display: flex;
  align-items: center;
  gap: 16px;
}

.color-preview {
  width: 48px;
  height: 48px;
  border-radius: 12px;
  border: 2px solid #d1d5db;
  box-shadow: inset 0 0 4px rgba(0, 0, 0, 0.1);
}

.color-input {
  width: 70px;
  height: 40px;
  border: 1px solid #d1d5db;
  border-radius: 8px;
  padding: 0;
}

.color-actions {
  display: flex;
  gap: 8px;
}

@media (max-width: 600px) {
  .color-controls {
    flex-direction: column;
    align-items: flex-start;
  }
  .color-actions {
    flex-direction: column;
  }
}
</style>
{% endblock %}
